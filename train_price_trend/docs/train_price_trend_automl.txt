1) Run AutoML (writes trials + best_config)
export CURATED_ROOT=/mnt/nvme/betfair-curated
python3 /opt/BetfairBotML/train_price_trend/ml/train_price_trend_automl.py \
  --curated "$CURATED_ROOT" \
  --asof 2025-09-26 \
  --start-date 2025-09-05 \
  --valid-days 7 \
  --sport horse-racing \
  --preoff-max 30 \
  --horizon-secs 120 \
  --device cuda \
  --ev-mode mtm \
  --enforce-liquidity \
  --edge-grid 0.0005,0.001,0.0015,0.002,0.003 \
  --stake-grid flat,kelly \
  --odds-grid none,2.2:3.6,1.5:5.0 \
  --liquidity-levels-grid 1,3


This will create:

/opt/BetfairBotML/train_price_trend/output/automl/2025-09-26/automl/trials_2025-09-26.csv

/opt/BetfairBotML/train_price_trend/output/automl/2025-09-26/automl/best_config.json

If you prefer to sweep without liquidity (since your snapshots currently lack depth arrays), just drop --enforce-liquidity from that command.

2) Re-run the best config
/opt/BetfairBotML/train_price_trend/bin/run_best_trend.sh


(Defaults to yesterdayâ€™s ASOF. If you used a different tag in AutoML, pass it: run_best_trend.sh 2025-09-26 mytag.)

Quick checks if it still complains

Make sure jq is installed (the script uses it to read JSON).

Ensure the AutoML --tag matches the default automl (or pass your tag to run_best_trend.sh).

Confirm the path printed by AutoML matches what run_best_trend.sh expects.